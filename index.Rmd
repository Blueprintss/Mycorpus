---
title: "Loundness War Over?"
author: "by Joël Buijnsters"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    storyboard: true
    self_contained: false
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(spotifyr)
library(ggplot2)
library(tufte)
library(plotly)
library(compmus)
library(bslib)

## 70s-20s
All_playlist <- readRDS(file = "data/All_playlist.RDS")

Arranged_playlists <- All_playlist %>%
  filter(loudness > -18) %>%
  arrange(playlist_name)

Mean_Loudness_playlists <- Arranged_playlists %>%
  group_by(playlist_name) %>%
  summarise(mean_loudness = mean(loudness))

Mean_Energy_Loundess_playlists <- Arranged_playlists %>%
  group_by(playlist_name) %>%
  summarise(mean_energy = mean(energy), mean_loudnesss = mean(loudness))

Playlist_labs <- c("70s", "80s", "90s", "00s", "10s", "20s")



##RHCP
RHCP_Songs <- get_playlist_audio_features("", "761qISmudNnnQ99BvnU4wo?")

Arranged_Album_RHCP_Songs <- RHCP_Songs %>%
  arrange(track.album.release_date)



## low-level audio analysis
All_playlist_analysis <- readRDS(file = "data/All_playlist_analysis.RDS")

Arranged_playlists_analysis <- All_playlist_analysis %>%
  arrange(playlist_name) %>%
  mutate(category = factor(category, levels = c(
    "70s", "80s", "90s", "00s", "10s", "20s" )))





#  One set of standard templates is below: 1–0 coding for the chord templates and the Krumhansl–Kessler key profiles.

circshift <- function(v, n) {               
  if (n == 0) v else c(tail(v, n), head(v, -n))
}

#      C     C#    D     Eb    E     F     F#    G     Ab    A     Bb    B
major_chord <-
  c(   1,    0,    0,    0,    1,    0,    0,    1,    0,    0,    0,    0)
minor_chord <-
  c(   1,    0,    0,    1,    0,    0,    0,    1,    0,    0,    0,    0)
seventh_chord <-
  c(   1,    0,    0,    0,    1,    0,    0,    1,    0,    0,    1,    0)

major_key <-
  c(6.35, 2.23, 3.48, 2.33, 4.38, 4.09, 2.52, 5.19, 2.39, 3.66, 2.29, 2.88)
minor_key <-
  c(6.33, 2.68, 3.52, 5.38, 2.60, 3.53, 2.54, 4.75, 3.98, 2.69, 3.34, 3.17)

chord_templates <-
  tribble(
    ~name, ~template,
    "Gb:7", circshift(seventh_chord, 6),
    "Gb:maj", circshift(major_chord, 6),
    "Bb:min", circshift(minor_chord, 10),
    "Db:maj", circshift(major_chord, 1),
    "F:min", circshift(minor_chord, 5),
    "Ab:7", circshift(seventh_chord, 8),
    "Ab:maj", circshift(major_chord, 8),
    "C:min", circshift(minor_chord, 0),
    "Eb:7", circshift(seventh_chord, 3),
    "Eb:maj", circshift(major_chord, 3),
    "G:min", circshift(minor_chord, 7),
    "Bb:7", circshift(seventh_chord, 10),
    "Bb:maj", circshift(major_chord, 10),
    "D:min", circshift(minor_chord, 2),
    "F:7", circshift(seventh_chord, 5),
    "F:maj", circshift(major_chord, 5),
    "A:min", circshift(minor_chord, 9),
    "C:7", circshift(seventh_chord, 0),
    "C:maj", circshift(major_chord, 0),
    "E:min", circshift(minor_chord, 4),
    "G:7", circshift(seventh_chord, 7),
    "G:maj", circshift(major_chord, 7),
    "B:min", circshift(minor_chord, 11),
    "D:7", circshift(seventh_chord, 2),
    "D:maj", circshift(major_chord, 2),
    "F#:min", circshift(minor_chord, 6),
    "A:7", circshift(seventh_chord, 9),
    "A:maj", circshift(major_chord, 9),
    "C#:min", circshift(minor_chord, 1),
    "E:7", circshift(seventh_chord, 4),
    "E:maj", circshift(major_chord, 4),
    "G#:min", circshift(minor_chord, 8),
    "B:7", circshift(seventh_chord, 11),
    "B:maj", circshift(major_chord, 11),
    "D#:min", circshift(minor_chord, 3)
  )

key_templates <-
  tribble(
    ~name, ~template,
    "Gb:maj", circshift(major_key, 6),
    "Bb:min", circshift(minor_key, 10),
    "Db:maj", circshift(major_key, 1),
    "F:min", circshift(minor_key, 5),
    "Ab:maj", circshift(major_key, 8),
    "C:min", circshift(minor_key, 0),
    "Eb:maj", circshift(major_key, 3),
    "G:min", circshift(minor_key, 7),
    "Bb:maj", circshift(major_key, 10),
    "D:min", circshift(minor_key, 2),
    "F:maj", circshift(major_key, 5),
    "A:min", circshift(minor_key, 9),
    "C:maj", circshift(major_key, 0),
    "E:min", circshift(minor_key, 4),
    "G:maj", circshift(major_key, 7),
    "B:min", circshift(minor_key, 11),
    "D:maj", circshift(major_key, 2),
    "F#:min", circshift(minor_key, 6),
    "A:maj", circshift(major_key, 9),
    "C#:min", circshift(minor_key, 1),
    "E:maj", circshift(major_key, 4),
    "G#:min", circshift(minor_key, 8),
    "B:maj", circshift(major_key, 11),
    "D#:min", circshift(minor_key, 3)
  )

```



Introduction
=======================================================================

### Introduction to My Corpus


The [Loundess War](https://en.wikipedia.org/wiki/Loudness_war) refers to a trend in music production since the 80s where songs are made as loud as possible, often at the expense of dynamic range, sound quality and listerener fatique. The goal of the Loudness War is to make a song stand out on the radio or in a CD-player, where louder songs are more likely to catch the listener's attention.

My expectation is that the relative loudness wil decline at the same time that streaming services started to gain a lot of clients. Since all the streaming services use normalization (every song is equally loud), their isn't any beneficial factor left for making a song sheer loud. I suspect producers will focus again on quality and impact.
				
By looking at data from Spotify i will be searching for evidence of the existence of the Loudness War and if the decline of the Loudness corresponds with the fall of the CD Sales and the rise of steaming services during the 00s and 10s. (**See: Background -> Music Sales**)

At the same time i will look at the music of one of my favorite bands The Red Hot Chili Peppers, since they have produced albums since the 80s, I would be interesting to see if they have followed the Loudness War trend.

If you want some music to listen too during reading please go to (**Conclusion -> Source**) 


Red Hot Chili Peppers {data-navmenu=Background}
===========================================================================


The Red Hot Chili Peppers (RHCP) are an American rock band formed in Los Angeles, California, in 1983. 
RHCP's style combines elements of funk, punk, and rock music,
RHCP's music often deals with themes of love, sexuality, and California culture
The band has sold over 80 million records worldwide, making them one of the best-selling bands of all time.

The Red Hot Chili Peppers have released a total of 11 studio albums, several live albums, compilations, and EPs. Here's a brief overview of their discography:

The Red Hot Chili Peppers (1984) - This is the band's debut album, featuring a more punk rock sound and an early lineup that included founding members Anthony Kiedis, Flea, Hillel Slovak, and Jack Irons.

Freaky Styley (1985) - This album saw the band exploring more funk and soul influences, with George Clinton producing.

The Uplift Mofo Party Plan (1987) - This album marked the return of guitarist Hillel Slovak and drummer Jack Irons to the band, and is considered one of their most energetic and raw releases.

Mother's Milk (1989) - This album marked a major breakthrough for the band, with the hits "Higher Ground" and "Knock Me Down" gaining them mainstream attention.

Blood Sugar Sex Magik (1991) - This album is considered a masterpiece by many, featuring the hit singles "Give It Away," "Under the Bridge," and "Suck My Kiss." It remains one of the band's most successful and beloved releases.

One Hot Minute (1995) - This album marked the departure of guitarist John Frusciante, and the arrival of new guitarist Dave Navarro. The album saw the band experimenting with more psychedelic and heavy rock sounds.

Californication (1999) - This album marked the return of John Frusciante to the band, and saw them returning to a more melodic and accessible sound. The title track and "Scar Tissue" became massive hits.

By the Way (2002) - This album continued in the vein of Californication, with a more polished and pop-oriented sound. Hits included "By the Way" and "Can't Stop."

Stadium Arcadium (2006) - This double album is one of the band's most ambitious releases, featuring a diverse range of styles and sounds. It won the band multiple Grammy Awards, including Best Rock Album.

I'm with You (2011) - This album marked the departure of guitarist John Frusciante, and the arrival of new guitarist Josh Klinghoffer. The album saw the band experimenting with more electronic and atmospheric sounds.

The Getaway (2016) - This album marked the return of producer Danger Mouse, and saw the band continuing to explore new sounds and styles. The title track and "Dark Necessities" were popular singles.

Unlimited Love (2022) - The album has a little bit more indie influeced. Black summer toped in Indie hitlist

Return of the Dream Canteen (2022) - Newest album



Music Sales {data-navmenu=Background} 
===========================================================================

Column {data-width=650} {.tabset}
-----------------------------------------------------------------------

### Growth Spotify

![Source: Spotify Announcements](https://www.businessofapps.com/wp-content/uploads/2018/11/Spotify-user-growth-and-features.png)

### Sales CD

![Source: RIAA](https://i.pinimg.com/originals/26/39/2e/26392e02222893393165324e0ab3ed0c.jpg)

Column {data-width=350} 
-----------------------------------------------------------------------

### Notes

As seen in the graphs Spotify started to take off in the end of the 00s. 
At the same time we see a massive decline in Sales for CD's. 
This suggest a correlation. I get back on this in the conclusion.




Main Loudness Chart {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Chart A

```{r plot 1 Boxplot}

Plot_Arranged_playlists <- readRDS(file = "data/Boxplot-Arranged_playlists.RDS")
ggplotly(Plot_Arranged_playlists)

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes

Here you see a boxplot (You can hover over the graph for more information).

What I want you to understand is that we can see a clear rise in Loudness since the 70s up until the 00s after that it declines. This perfeclty aligns with my expecation from the introduction.


RHCP & Loudness {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Mean Loudness

```{r plot 2 Mean_Loudness}

Plot_Mean_Loudness_playlists <- readRDS(file = "data/Plot-Mean_Loudness_playlist.RDS")
ggplotly(Plot_Mean_Loudness_playlists)

```

### Mean RHCP 


```{r plot 3 Mean_Loudness RHCP}

Plot_RHCP <- readRDS(file = "data/RHCP_Plot.RDS")
ggplotly(Plot_RHCP)

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes

Here you can compare the mean of the decades with the albums RHCP put out. What we can learn is that RHCP have a much higher loudness since when they started compared to the mean of the decades. Until the 10s then they stated to confirm to the mean loudness. Beware that the y-axis's don't have the same scale.

What really stands out is the album from 1991. Which is oddly enough one of their best received albums, so without competing in the loudness war they still received lots of praise for this album.



Energy & Loudness {data-navmenu=Visualisation}
=====================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Plot

```{r plot 3 Mean_energy & Loudness}

Plot_Mean_Energy_Loudness_playlists <- readRDS(file = "data/Plot-Mean_Energy_Loudness_playlists.RDS")
Plot_Mean_Energy_Loudness_playlists


```


Column {data-width=350}
-----------------------------------------------------------------------

### Notes

Spotify uses a feature called Energy, which is based on dynamic range, perceived loudness, timbre, onset rate, and general entropy. Since I work with Loudness I thought it would be interesting to see how much loudness and energy would overlap.

What i found interesting was the fact that while the energy clearly declined during the 10s and 20s the loudness declined only slowly.



Cepstrograms {data-navmenu=Visualisation}
======================================================================

Column {data-width=650} {.tabset}
-----------------------------------------------------------------------


### Cepstrogram: RHCP - Under The Bridge (1991)

```{r Cepstrogram 1}

Plot_UTB <- readRDS(file = "data/Plot-UTB.RDS") ## Add track newest album, add ggplotly
Plot_UTB

```


### Cepstrogram: RHCP - Snow (2006)

``` {r Cepstrogram 2}

Plot_Snow <- readRDS(file = "data/Plot-Snow.RDS") ## Add track newest album, add ggplotly
Plot_Snow

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes

Spotifiy data works with timbre coefficients (c01-c12)
For this corpus its only necessary to understand that c01 represents the loudness coefficient 

I choose to make 2 cepstrograms, The c01 coefficient is obvious the most interesting factor to focus on here. As explained in the introduction the loudness war has an influence on the dynamic range. This is very good visible in these examples :

The song Snow from 2006 has a lot of homogenity in the c01 factor which represents the same loudness trough the entire song, apart form the intro and outro.

On the other hand the song Under The Bridge from 1991 is very different. The c01 from this graph is obviously more different throughout the entire song, which snow a lot of dynamic range through the entire song.

These observations perfectly align with my expectation.



Standard Deviation {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------


### Timbre Plot

``` {r SD A}

Plot_SDA <- readRDS(file = "data/SDA.RDS")
ggplotly(Plot_SDA)


```


Column {data-width=350}
-----------------------------------------------------------------------

### Notes

So what we see here on the x-axis are the timbre coeffiecients. (c01-c12)
I mainly want to focus c01 here. This represents the loudness.

Please zoom in so its better to follow, 
you can clearly see that the 00s have a much smaller range than the other decades.
With a bit of imagination you can see the same features as seen by the Boxplot by the Main charts.



Temporal Features {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------


### Tempogram: RHCP - Under The Bridge (1991)

```{r Tempo UTB}

Tempo_UTB2 <- readRDS(file = "data/Tempo_UTB2.RDS") ## Add track newest album
ggplotly(Tempo_UTB2)

```


### Tempogram: RHCP - Snow (2006)


```{r Tempo Snow}

Tempo_Snow2 <- readRDS(file = "data/Tempo_Snow2.RDS") ## Add track newest album
ggplotly(Tempo_Snow2)

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes

This graphs shows the relative loudness changes, to each point in time. For my corpus it's interesting to see that the novelty peaks from Under The Bridge have a higher max, which is probably due to the higher dynamic range of this song.


Clustering {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Clustertree

```{r Clustertree}

Clustering_Colour <- readRDS(file = "data/Cluster_Colour.RDS") ## Clustered average
Clustering_Colour

```


Column {data-width=350}
-----------------------------------------------------------------------

### Notes

What your seeing here on your left is called a clustering tree.
I made a cluster tree purely based on loudness.

What this means is that songs that are clustered together should be in a similar range based on loudness.

This corpus suggest that if I cluster this way I should see that tracks form each decade should roughly be clustered together. On first look that's not exactly the case. But since I know work here with individual tracks instead of means, this is possible.

If I dive a little deeper I can see something interesting. Lets just look at the the two biggest clusters. You can see that the top one hardly has any tracks from the 00s and that most of the tracks form the 70s and 80s are represented in this cluster. This shows that the loudness levels from the tracks in the 70s and 80s really diver from most tracks in the 00s.


Conclusion {data-navmenu=Conclusion}
=======================================================================

I think the results are clear enough to say that their indeed was a Loundess War that took place since the 80s until the 00. Then at the same time Streaming services started to take off, Loundess did really decrease. This is prove that their is correlation between the rise of streaming services and the decline of loudness. Which for us as consumers of music is in my opinion a good thing. 

However as I mentioned by the energy graph, The energy did not so much decline since the 10s as the loudness did. This really begs the question what kind of production methods music producers use to gain the same amount of energy impact on listeners as they did before with sheer loudness. This would be a really great follow up research.

**So is the Loudness war really over?** 

Yes if we look at sheer loudness levels, however I think the war moved to another domain. Mainly to music production skills for streaming services. Since normalezation is the standard there, it leveled the playing field on sheer loudness, but not on perceived loudness.



Discussion {data-navmenu=Conclusion}
=======================================================================

While I stand for my conlclusion this reasearch is limited any in an ideal world would not be affected by the following points:

One thing what really affect this research is the influence of remasters. For example Smooth Criminial from Michael Jackson in the playlist I used is an Remaster. Sadly more often than not the original master isn't available on Spotify. So the original data is not always available for this research, this makes the research less of a representation than I wished for.

Also the representation is severly limited by the amount of data it covers, since I was not able to track all the music in the world i have picked the All out Playlist from the 70-20s to make my case. It's of course imaginable that with much more data the results of this research would have been different.


Source {data-navmenu=Conclusion}
=======================================================================
  
Spotify playlists used:
  
Column {data-width=650} {.tabset}
-----------------------------------------------------------------------
  
### 70s

<iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DWTJ7xPn4vNaz?utm_source=generator" width="100%" height="100%" frameBorder="0" allowtransparency="true" allow="encrypted-media" data-external="1"></iframe>
    
### 80s

<iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DX4UtSsGT1Sbe?utm_source=generator" width="100%" height="100%" frameBorder="0" allowtransparency="true" allow="encrypted-media" data-external="1"></iframe>
      
### 90s

<iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DXbTxeAdrVG2l?utm_source=generator" width="100%" height="100%" frameBorder="0" allowtransparency="true" allow="encrypted-media" data-external="1"></iframe>
        
### 00s

<iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DX4o1oenSJRJd?utm_source=generator" width="100%" height="100%" frameBorder="0" allowtransparency="true" allow="encrypted-media" data-external="1"></iframe>

          
### 10s

<iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DX5Ejj0EkURtP?utm_source=generator" width="100%" height="100%" frameBorder="0" allowtransparency="true" allow="encrypted-media" data-external="1"></iframe>
     
            
### 20s

<iframe src="https://open.spotify.com/embed/playlist/4vSTV61efRmetmaoz95Vet?utm_source=generator" width="100%" height="100%" frameBorder="0" allowtransparency="true" allow="encrypted-media" data-external="1"></iframe>
              
### RHCP

<iframe src="https://open.spotify.com/embed/playlist/761qISmudNnnQ99BvnU4wo?utm_source=generator" width="100%" height="100%" frameBorder="0" allowtransparency="true" allow="encrypted-media" data-external="1"></iframe>
                
                
Column {data-width=350}
-----------------------------------------------------------------------
                
### Notes
                
Please enjoy while reading this corpus, or under the shower. If you're smart you will first look at the Main Chart so you will see which playlist shouldn't tire your ears.