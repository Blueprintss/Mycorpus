---
title: "Loundness War Over?"
author: "by Joël Buijnsters"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    storyboard: true
    self_contained: false
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(spotifyr)
library(ggplot2)
library(tufte)
library(plotly)
library(compmus)
library(bslib)

## 70s-20s
All_playlist <- readRDS(file = "data/All_playlist.RDS")

Arranged_playlists <- All_playlist %>%
  filter(loudness > -18) %>%
  arrange(playlist_name)

Mean_Loudness_playlists <- Arranged_playlists %>%
  group_by(playlist_name) %>%
  summarise(mean_loudness = mean(loudness))

Mean_Energy_Loundess_playlists <- Arranged_playlists %>%
  group_by(playlist_name) %>%
  summarise(mean_energy = mean(energy), mean_loudnesss = mean(loudness))

Playlist_labs <- c("70s", "80s", "90s", "00s", "10s", "20s")



##RHCP
RHCP_Songs <- get_playlist_audio_features("", "761qISmudNnnQ99BvnU4wo?")

Arranged_Album_RHCP_Songs <- RHCP_Songs %>%
  arrange(track.album.release_date)



## low-level audio analysis
All_playlist_analysis <- readRDS(file = "data/All_playlist_analysis.RDS")

Arranged_playlists_analysis <- All_playlist_analysis %>%
  arrange(playlist_name) %>%
  mutate(category = factor(category, levels = c(
    "70s", "80s", "90s", "00s", "10s", "20s" )))





#  One set of standard templates is below: 1–0 coding for the chord templates and the Krumhansl–Kessler key profiles.

circshift <- function(v, n) {               
  if (n == 0) v else c(tail(v, n), head(v, -n))
}

#      C     C#    D     Eb    E     F     F#    G     Ab    A     Bb    B
major_chord <-
  c(   1,    0,    0,    0,    1,    0,    0,    1,    0,    0,    0,    0)
minor_chord <-
  c(   1,    0,    0,    1,    0,    0,    0,    1,    0,    0,    0,    0)
seventh_chord <-
  c(   1,    0,    0,    0,    1,    0,    0,    1,    0,    0,    1,    0)

major_key <-
  c(6.35, 2.23, 3.48, 2.33, 4.38, 4.09, 2.52, 5.19, 2.39, 3.66, 2.29, 2.88)
minor_key <-
  c(6.33, 2.68, 3.52, 5.38, 2.60, 3.53, 2.54, 4.75, 3.98, 2.69, 3.34, 3.17)

chord_templates <-
  tribble(
    ~name, ~template,
    "Gb:7", circshift(seventh_chord, 6),
    "Gb:maj", circshift(major_chord, 6),
    "Bb:min", circshift(minor_chord, 10),
    "Db:maj", circshift(major_chord, 1),
    "F:min", circshift(minor_chord, 5),
    "Ab:7", circshift(seventh_chord, 8),
    "Ab:maj", circshift(major_chord, 8),
    "C:min", circshift(minor_chord, 0),
    "Eb:7", circshift(seventh_chord, 3),
    "Eb:maj", circshift(major_chord, 3),
    "G:min", circshift(minor_chord, 7),
    "Bb:7", circshift(seventh_chord, 10),
    "Bb:maj", circshift(major_chord, 10),
    "D:min", circshift(minor_chord, 2),
    "F:7", circshift(seventh_chord, 5),
    "F:maj", circshift(major_chord, 5),
    "A:min", circshift(minor_chord, 9),
    "C:7", circshift(seventh_chord, 0),
    "C:maj", circshift(major_chord, 0),
    "E:min", circshift(minor_chord, 4),
    "G:7", circshift(seventh_chord, 7),
    "G:maj", circshift(major_chord, 7),
    "B:min", circshift(minor_chord, 11),
    "D:7", circshift(seventh_chord, 2),
    "D:maj", circshift(major_chord, 2),
    "F#:min", circshift(minor_chord, 6),
    "A:7", circshift(seventh_chord, 9),
    "A:maj", circshift(major_chord, 9),
    "C#:min", circshift(minor_chord, 1),
    "E:7", circshift(seventh_chord, 4),
    "E:maj", circshift(major_chord, 4),
    "G#:min", circshift(minor_chord, 8),
    "B:7", circshift(seventh_chord, 11),
    "B:maj", circshift(major_chord, 11),
    "D#:min", circshift(minor_chord, 3)
  )

key_templates <-
  tribble(
    ~name, ~template,
    "Gb:maj", circshift(major_key, 6),
    "Bb:min", circshift(minor_key, 10),
    "Db:maj", circshift(major_key, 1),
    "F:min", circshift(minor_key, 5),
    "Ab:maj", circshift(major_key, 8),
    "C:min", circshift(minor_key, 0),
    "Eb:maj", circshift(major_key, 3),
    "G:min", circshift(minor_key, 7),
    "Bb:maj", circshift(major_key, 10),
    "D:min", circshift(minor_key, 2),
    "F:maj", circshift(major_key, 5),
    "A:min", circshift(minor_key, 9),
    "C:maj", circshift(major_key, 0),
    "E:min", circshift(minor_key, 4),
    "G:maj", circshift(major_key, 7),
    "B:min", circshift(minor_key, 11),
    "D:maj", circshift(major_key, 2),
    "F#:min", circshift(minor_key, 6),
    "A:maj", circshift(major_key, 9),
    "C#:min", circshift(minor_key, 1),
    "E:maj", circshift(major_key, 4),
    "G#:min", circshift(minor_key, 8),
    "B:maj", circshift(major_key, 11),
    "D#:min", circshift(minor_key, 3)
  )

```



Introduction
=======================================================================

### Introduction to My Corpus

My Corpus is about the Loudness War, by using big data I'm wondering if the loudness from tracks really peaked during the Loudness War and if with the normalization tools from streaming services nowadays, the loudness from songs decreases again. I choose this, because i really hated the loudness war since my ear fatiqued way sooner and music was just flat. I really hope to find some proof that nowadays the loudnass war is finally ending.
				
My comparison points are from the Loudness factor of the spotify database, In which i will compare the output of the different decennia with the development of the loudness war.
				The representation is only limited by the amount of data it covers, since im not able to track all the music in the world i will pick the All out Playlist from the 70-10s to make my case. 

My expectation is that the relative loudness wil decline at the same time that streaming services started to gain a lot of members. Since all the streaming services use normalization (every song is equally loud), and with that their isn't any beneficial factor left for making a song sheer loud. I suspect producers will focus again on quality and impact.

At the same time i will look at the music of my favorite band The Red Hot Chili Peppers, since they have produced albums since the 80s, I would be interesting to see if they have followed the Loudness trend.


Loudness War {data-navmenu=Background}
===========================================================================


The Loudness War refers to a trend in music production where songs are made as loud as possible, often at the expense of dynamic range and sound quality. This is achieved through the use of various compression and limiting techniques that increase the volume of a recording, which can make it sound more aggressive and powerful.

The goal of the Loudness War is to make a song stand out on the radio or in a playlist, where louder songs are more likely to catch the listener's attention. However, this pursuit of loudness has led to the overuse of these techniques, which can result in distortion, loss of detail, and listener fatigue.

While loudness can be effective in some contexts, such as in rock or electronic music, it can also detract from the emotional impact of a song, and make it sound more monotonous or tiresome over time. As a result, many music professionals and fans advocate for a return to more natural, dynamic sound production, and for musicians to prioritize the quality and impact of their music over sheer volume.


Red Hot Chili Peppers {data-navmenu=Background}
===========================================================================


The Red Hot Chili Peppers (RHCP) are an American rock band formed in Los Angeles, California, in 1983. 
HCP's style combines elements of funk, punk, and rock music,
RHCP's music often deals with themes of love, sexuality, and California culture
The band has sold over 80 million records worldwide, making them one of the best-selling bands of all time.

The Red Hot Chili Peppers have released a total of 11 studio albums, several live albums, compilations, and EPs. Here's a brief overview of their discography:

The Red Hot Chili Peppers (1984) - This is the band's debut album, featuring a more punk rock sound and an early lineup that included founding members Anthony Kiedis, Flea, Hillel Slovak, and Jack Irons.

Freaky Styley (1985) - This album saw the band exploring more funk and soul influences, with George Clinton producing.

The Uplift Mofo Party Plan (1987) - This album marked the return of guitarist Hillel Slovak and drummer Jack Irons to the band, and is considered one of their most energetic and raw releases.

Mother's Milk (1989) - This album marked a major breakthrough for the band, with the hits "Higher Ground" and "Knock Me Down" gaining them mainstream attention.

Blood Sugar Sex Magik (1991) - This album is considered a masterpiece by many, featuring the hit singles "Give It Away," "Under the Bridge," and "Suck My Kiss." It remains one of the band's most successful and beloved releases.

One Hot Minute (1995) - This album marked the departure of guitarist John Frusciante, and the arrival of new guitarist Dave Navarro. The album saw the band experimenting with more psychedelic and heavy rock sounds.

Californication (1999) - This album marked the return of John Frusciante to the band, and saw them returning to a more melodic and accessible sound. The title track and "Scar Tissue" became massive hits.

By the Way (2002) - This album continued in the vein of Californication, with a more polished and pop-oriented sound. Hits included "By the Way" and "Can't Stop."

Stadium Arcadium (2006) - This double album is one of the band's most ambitious releases, featuring a diverse range of styles and sounds. It won the band multiple Grammy Awards, including Best Rock Album.

I'm with You (2011) - This album marked the departure of guitarist John Frusciante, and the arrival of new guitarist Josh Klinghoffer. The album saw the band experimenting with more electronic and atmospheric sounds.

The Getaway (2016) - This album marked the return of producer Danger Mouse, and saw the band continuing to explore new sounds and styles. The title track and "Dark Necessities" were popular singles.

Unlimited Love (2022) - The album has a little bit more indie influeced. Black summer toped in Indie hitlist

Return of the Dream Canteen (2022) - Newest album



Music Sales {data-navmenu=Background} 
===========================================================================

Column {data-width=650} {.tabset}
-----------------------------------------------------------------------

### Growth Spotify

![Source: Spotify Announcements](https://www.businessofapps.com/wp-content/uploads/2018/11/Spotify-user-growth-and-features.png)

### Sales CD

![Source: RIAA](https://i.pinimg.com/originals/26/39/2e/26392e02222893393165324e0ab3ed0c.jpg)

Column {data-width=350} 
-----------------------------------------------------------------------

### Notes

As seen in the graph i made spotify started to take off in the end of the 00s. At the same time we see a massive decline in Sales for CD's. This suggest a correlation. I get back on this in the conclusion.




Main Loudness Chart {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Chart A

```{r plot 1 Boxplot}

Plot_Arranged_playlists <- readRDS(file = "data/Boxplot-Arranged_playlists.RDS")
ggplotly(Plot_Arranged_playlists)

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes

Charts are hopefuly selfexplanitory otherwise i will write something here


RHCP & Loudness {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Mean Loudness

```{r plot 2 Mean_Loudness}

Plot_Mean_Loudness_playlists <- readRDS(file = "data/Plot-Mean_Loudness_playlist.RDS")
ggplotly(Plot_Mean_Loudness_playlists)

```

### Mean RHCP 


```{r plot 3 Mean_Loudness RHCP}

Plot_RHCP <- readRDS(file = "data/RHCP_Plot.RDS")
ggplotly(Plot_RHCP)

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes

Here we can compare the mean of the decades with the albums RHCP put out. What we can learn is that RHCP have a much higher loudness since when they started compared to the mean of the decades. Until the 10s then they stated to confirm to the mean loudness. 

What really stand out is the album out 1991. Which is oddly enough one of their best recieved albums, so without competing in the loudnesswar they still recieved lots of praise for this album.



Energy vs Loudness {data-navmenu=Visualisation}
=====================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Plot

```{r plot 3 Mean_energy & Loudness}

Plot_Mean_Energy_Loudness_playlists <- readRDS(file = "data/Plot-Mean_Energy_Loudness_playlists.RDS")
ggplotly(Plot_Mean_Energy_Loudness_playlists)


```


Column {data-width=350}
-----------------------------------------------------------------------

### Notes

asdfasdf


Cesptrogram {data-navmenu=Visualisation}
======================================================================

Column {data-width=650} {.tabset}
-----------------------------------------------------------------------


### Cesptrogram: RHCP - Under The Bridge (1991)

```{r Cesptrogram 1}

Plot_UTB <- readRDS(file = "data/Plot-UTB.RDS") ## Add track newest album, add ggplotly
Plot_UTB

```


### Cepstrogram: RHCP - Snow (2006)

``` {r Cepstrogram 2}

Plot_Snow <- readRDS(file = "data/Plot-Snow.RDS") ## Add track newest album, add ggplotly
Plot_Snow

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes

I choose to make 2 cepstrograms, since my corpus is so loudness based the c01 (loudness factor) is the obivious most interseting factor to focus on here. As explained in the background the loudnesswar has an influence on the dynamic range. This is very good visible in these examples :

The song Snow from 2006 has a lot of homogenity in the c01 factor which respresents the same loudness trough the entire song, apart form the intro en end..

On the other hand the song Under The Bridge from 1991 is very different. The c01 from this graph is obviously more different throughout the entire song, which snow a lot of dynamic range thourgh the entire song.

These observations perfectly align with my hypotheses.



Standard Deviation {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------


### Timbre Graph

``` {r SD A}

Plot_SDA <- readRDS(file = "data/SDA.RDS")
ggplotly(Plot_SDA)


```


Column {data-width=350}
-----------------------------------------------------------------------

### Notes

So what we see here on the x-axis are the timbre coeffiecients. (c01-c12)
I mainly want to focus c01 here. This represents the loudness.

Please zoom in so its better to follow, 
you can clearly see that the 00s have a much smaller range that the other decades.
With a bit of imagination you can see the same features as seen by the boxplot by the Main charts.



Temporal Feautures {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------


### UTB

```{r Tempo UTB}

Tempo_UTB2 <- readRDS(file = "data/Tempo_UTB2.RDS") ## Add track newest album
ggplotly(Tempo_UTB2)

```


### Snow


```{r Tempo Snow}

Tempo_Snow2 <- readRDS(file = "data/Tempo_Snow2.RDS") ## Add track newest album
ggplotly(Tempo_Snow2)

```

Column {data-width=350}
-----------------------------------------------------------------------

### Notes
This graphs shows the relative loudness changes, to each point in time. For my corpus its interesting to see that the novelty peaks from UTB have a higher max, which is probably due to the higher dynamic range of this song.







Clustering {data-navmenu=Visualisation}
======================================================================

Column {data-width=650}
-----------------------------------------------------------------------

### Clustertree

```{r Clustertree}

Clustering_Colour <- readRDS(file = "data/Cluster_Colour.RDS") ## Clustered average
Clustering_Colour

```


Column {data-width=350}
-----------------------------------------------------------------------

### Notes

What your seeing here on your left is called a clustering tree.
I made a cluster tree purely based on loudness

What this means is that Songs that are clustered together should have be in a simalair range based on loudness

Our corpus suggest that if we cluster this way we should see that tracks form each decade should roughly be clustered togehter. On first look that's not exactly the case. But since we know work with individual tracks instead of means, this is possible.

If we dive a little deeper we can see something interesting. If we just look at the two biggest clusters. We can see that the top one hardly has any tracks from the 00s and that most of the tracks form the 70s ands 80s are represented in this cluster. This shows that the loudness levels from the tracks in the 70s and 80s really diver from most tracks in the 00s.


Conclusion {data-navmenu=Conclusion}
=======================================================================

Conclusion Research:

Discussion {data-navmenu=Conclusion}
=======================================================================

One thing what really influences this research is the influence of remasters. For example Smooth Criminial from Michael Jackson in the playlist is an Remaster. Sadly more often than not the orignial master isn't available on spotify. So the original data is not always available for this research. Understandebly enough this makes the research less of a representation than I wished for.



Source {data-navmenu=Conclusion}
=======================================================================